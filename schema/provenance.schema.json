{
	"title": "Provenance",
	"description": "The details of a piece of information's origin",
	"type": "object",
	"properties": {
		"source": {
			"description": "The person or organisation who provided the information",
			"type": "string",
			"enum": [
				"NZ Police"
			]
		},
		"method": {
			"description": "The method by which the information was published or released",
			"type": "string",
			"enum": [
				"Released under the OIA",
				"Proactively released",
				"Leaked"
			]
		},
		"oiaRequest": {
			"description": "Details of the OIA request which resulted in this information's release",
			"$ref": "oia-request.schema.json"
		},
		"withholdings": {
			"description": "Details of any information that has been withheld from a proactively released document",
			"$ref": "oia-withholdings.schema.json"
		},
		"published": {
			"description": "The date on which the file was published",
			"$ref": "date-partial.schema.json"
		},
		"released": {
			"description": "The date on which the file was released",
			"$ref": "date-partial.schema.json"
		},
		"retrieved": {
			"description": "If the file was retrieved or released after its initial publication, the date on which it was retrieved",
			"$ref": "date-partial.schema.json"
		},
		"url": {
			"description": "The URL of the page where the file was retrieved from",
			"type": "string",
			"format": "uri"
		},
		"fileUrl": {
			"description": "The URL of the file where it was originally retrieved from",
			"type": "string",
			"format": "uri"
		}
	},
	"required": [
		"source",
		"method"
	],
	"allOf": [
		{
			"anyOf": [
				{ "required": ["published"] },
				{ "required": ["released"] },
				{ "required": ["retrieved"] }
			]
		},
		{
			"$comment": "The \"oiaRequest\" property must be present if and only if the method of release was \"Released under the OIA\"",
			"oneOf": [
				{
					"properties": {
						"method": { "const": "Released under the OIA" }
					},
					"required": ["oiaRequest"]
				},
				{
					"not": {
						"anyOf": [
							{
								"properties": {
									"method": { "const": "Released under the OIA" }
								}
							},
							{ "required": ["oiaRequest"] }
						]
					}
				}
			]
		},
		{
			"$comment": "The \"withholdings\" property must be present if and only if the method of release was \"Proactively released\"",
			"oneOf": [
				{
					"properties": {
						"method": { "const": "Proactively released" }
					},
					"required": ["withholdings"]
				},
				{
					"not": {
						"anyOf": [
							{
								"properties": {
									"method": { "const": "Proactively released" }
								}
							},
							{ "required": ["withholdings"] }
						]
					}
				}
			]
		}
	],
	"additionalProperties": false
}
